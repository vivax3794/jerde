<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>jerde API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>jerde</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import typing
import types
import abc
import inspect
from typing import Any, Mapping, Sequence, TypeAlias, TypeVar, Optional

_JSON_DATA: TypeAlias = str | int | None | Sequence[object] | Mapping[str, object]
T = TypeVar(&#34;T&#34;)


class RenameField:
    &#34;&#34;&#34;
    Lets you rename the field a value has in the json structure.

    example:
    &gt;&gt;&gt; from typing import Annotated
    &gt;&gt;&gt; class RenameExample(JsonModel):
    ...     value: Annotated[int, RenameField(&#34;other&#34;)]
    &gt;&gt;&gt; x = RenameExample({&#34;other&#34;: 10})
    &gt;&gt;&gt; x.value
    10
    &gt;&gt;&gt; x.value = 20
    &gt;&gt;&gt; x.to_json()
    {&#34;other&#34;: 20}

    &#34;&#34;&#34;
    def __init__(self, json_name: str) -&gt; None:
        self.json_name = json_name

    def __repr__(self) -&gt; str:
        return f&#34;RenameField({self.json_name!r})&#34;


def _get_fields(cls: type) -&gt; list[tuple[str, str, type]]:
    fields: list[tuple[str, str, type]] = []

    for name, annotation in typing.get_type_hints(cls   , include_extras=True).items():
        json_key = name

        if typing.get_origin(annotation) == typing.Annotated:
            annotation, *args = typing.get_args(annotation)
            for arg in args:
                if isinstance(arg, RenameField):
                    json_key = arg.json_name

        fields.append((name, json_key, annotation))

    return fields


def _deserialize_union(name: str, value: object, expected_type: object, module_scope: dict[str, object]) -&gt; Any:
    accepted_types: tuple[type, ...] = typing.get_args(expected_type)

    errors: list[str] = []
    for possible in accepted_types:
        try:
            return deserialize_value(name, value, possible, module_scope)
        except (TypeError, ValueError) as err:
            errors.append(f&#34;&#39;{str(possible)}&#39;: {err}&#34;)
    if errors:
        error_padding = &#34;\n&#34;.join(errors).replace(&#34;\n&#34;, &#34;\n\t&#34;)
        raise TypeError(f&#34;{name!r} did not match &#39;{expected_type}&#39;\n\t{error_padding}&#34;)

    return value  # type: ignore

def deserialize_value(name: str, value: _JSON_DATA, expected_type: object, module_scope: dict[str, object]) -&gt; Any:
    &#34;&#34;&#34;
    Deserialize any specific value, can be any supported hint including union!

    `name` l be included in any error messages produced!

    `module_scope` l be used to resolve forward referenced type hints, for example `dict[str, &#34;ModelA&#34;]`. this can usually just be `globals()`

    &gt;&gt;&gt; deserialize_value(&#34;...&#34;, ..., ModelA | ModelB, globals())
    &#34;&#34;&#34;
    if isinstance(expected_type, str):
        expected_type = eval(expected_type, globals(), module_scope)

    if typing.get_origin(expected_type) == list:
        if not isinstance(value, list):
            raise TypeError(f&#34;Expected {name!r} to be {expected_type}, but got: {type(value)}&#34;)

        list_members: type = typing.get_args(expected_type)[0]
        return [deserialize_value(f&#34;{name}.{index}&#34;, elem, list_members, module_scope) for index, elem in enumerate(value)]  # type: ignore
    
    if typing.get_origin(expected_type) == dict:
        if not isinstance(value, dict):
            raise TypeError(f&#34;Expected {name!r} to be {expected_type}, but got: {type(value)}&#34;)
        
        key_type, value_type = typing.get_args(expected_type)
        if key_type != str:
            raise TypeError(f&#34;Dict key type must be str, got {key_type}, in type hint for {name!r}&#34;)
        
        return {key: deserialize_value(f&#34;{name}.{key}&#34;, item, value_type, module_scope) for key, item in value.items()}

    if typing.get_origin(expected_type) == typing.Literal:
        possible = typing.get_args(expected_type)
        if value not in possible:
            raise ValueError(f&#34;expected {name!r} to be one of {possible}, got {value!r}&#34;)
        
        return value

    if typing.get_origin(expected_type) in {typing.Union, types.UnionType}:
        return _deserialize_union(name, value, expected_type, module_scope)

    if issubclass(expected_type, JsonModel):
        if isinstance(value, expected_type):
            return value
            
        return expected_type(value)

    if issubclass(expected_type, JsonConverterModel):
        if not hasattr(expected_type, &#34;__orig_bases__&#34;):
            raise TypeError(f&#34;Cannot perform inspection of type {expected_type}&#34;)
        bases: tuple[type, ...] = expected_type.__orig_bases__ # type: ignore
        json_type: None | type = None
        for base in bases:
            if issubclass(typing.get_origin(base) or int, JsonConverterModel):
                json_type = typing.get_args(base)[0]
        if json_type is None:
            raise TypeError(&#34;Unable to determine converter base type from provided bases: {bases}&#34;)
        
        return expected_type(deserialize_value(name, value, json_type, module_scope))  # type: ignore

    if not isinstance(value, expected_type):
        raise TypeError(f&#34;Expected {name!r} to be &#39;{expected_type}&#39;, but got: {type(value)}&#34;)
    
    return value 


def _serialize_value(value: object) -&gt; _JSON_DATA:
    if isinstance(value, JsonModel):
        return {json_key: _serialize_value(getattr(value, name)) for name, json_key, _ in _get_fields(value.__class__)}
    elif isinstance(value, JsonConverterModel):
        return value.to_json()
    elif isinstance(value, list):      
        v: list[object] = value  
        return [_serialize_value(elem) for elem in v]
    elif isinstance(value, dict):
        v: dict[str, object] = value
        return {key: _serialize_value(item) for key, item in v.items()}
    elif isinstance(value, (int, str)):
        return value        
    else:
        raise TypeError(f&#34;Can not serialize value of type {type(value)}&#34;)

class JsonModel:
    &#34;&#34;&#34;
    This class is the main thing that does stuff.

    It lets you define the structure of your json and use it as a normal class as well.
    This class l automatically parse json data in its __init__ and raise a TypeError if the structure does not match.

    &gt;&gt;&gt; class SimpleExample(JsonModel):
    ...     stuff: int
    &gt;&gt;&gt; SimpleExample({&#34;stuff&#34;: 10}).stuff
    10
    &gt;&gt;&gt; SimpleExample({&#34;stuff&#34;: &#34;wrong&#34;})
    TypeError: ...

    You can also use keyword arguments to specify values in a nicer format.
    &gt;&gt;&gt; class SimpleExample(JsonModel):
    ...     stuff: int
    &gt;&gt;&gt; SimpleExample(stuff = 10).stuff
    10

    It also supports unions (both `typing.Union` and 3.10 `|` syntax).
    &gt;&gt;&gt; class UnionExample(JsonModel):
    ...     stuff: int | str
    &gt;&gt;&gt; UnionExample({&#34;stuff&#34;: &#34;hi&#34;}).stuff
    &#34;hi&#34;

    We also have support for Optional!
    &gt;&gt;&gt; from typing import Optional
    &gt;&gt;&gt; class OptionalExample(JsonModel):
    ...     stuff: Optional[int]
    &gt;&gt;&gt; OptionalExample({&#34;stuff&#34;: 10}).stuff
    10
    &gt;&gt;&gt; OptionalExample({}).stuff
    None

    You can also have default values for fields, implicitly making them optional!
    &gt;&gt;&gt; class DefaultExample(JsonModel):
    ...     stuff: int = 10
    &gt;&gt;&gt; DefaultExample({}).stuff
    10
    &#34;&#34;&#34;

    def __init__(self, data: Optional[_JSON_DATA] = None, **kwargs: object):
        if data is None:
            data = kwargs

        if not isinstance(data, dict):
            raise TypeError(&#34;Expected dict&#34;)

        # error check data
        fields = _get_fields(self.__class__)
        module = inspect.getmodule(self.__class__)

        for name, json_key, expected_type in fields:
            if hasattr(self.__class__, name) and json_key not in data:
                setattr(self, name, getattr(self.__class__, name))
                continue

            setattr(self, name, deserialize_value(json_key, data.get(json_key), expected_type, module.__dict__))

    
    def to_json(self) -&gt; _JSON_DATA:
        &#34;&#34;&#34;
        Convert from the model into the json.

        This does the reverse from `__init__`.

        &gt;&gt;&gt; class SimpleExample(JsonModel):
        ...     stuff: int
        &gt;&gt;&gt; x = SimpleExample({&#34;stuff&#34;: 10})
        &gt;&gt;&gt; x.stuff = 20
        &gt;&gt;&gt; x.to_json()
        {&#34;stuff&#34;: 20}
        &#34;&#34;&#34;            
        return _serialize_value(self)


class JsonConverterModel(typing.Generic[T], abc.ABC):
    &#34;&#34;&#34;
    Allows you to define custom converts for json values.
    Giving you more control of how you data is loaded!

    You need to specify the expected structure of the json, this can be any of the same typehints used in normal json fields.
    And the value will be converted into the expected value before being passed to init.
    This means you can use other models as a value, even other converter models!

    &gt;&gt;&gt;  # we expect the json to just be a int
    &gt;&gt;&gt; class Converter(JsonConverterModel[int]): 
    ...     def __init__(self, data: int) -&gt; None:
    ...         self.value = data + 10  # lets do some custom logic
    ...     def to_json(self) -&gt; int:
    ...         return self.value - 10
    &gt;&gt;&gt; class ConverterExample(JsonModel):
    ...     stuff: Converter
    &gt;&gt;&gt; x = ConverterExample({&#34;stuff&#34;: 10})
    &gt;&gt;&gt; x.stuff.value
    20
    &gt;&gt;&gt; x.to_json()
    {&#34;stuff&#34;: 10}
    
    **Note:** it is good practice (but not enforced) to make sure that:
    &gt;&gt;&gt; Converter(something).to_json() == something
    True
    &#34;&#34;&#34;

    @abc.abstractmethod
    def __init__(self, data: T) -&gt; None: ...
    @abc.abstractmethod
    def to_json(self) -&gt; T: ...</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="jerde.deserialize_value"><code class="name flex">
<span>def <span class="ident">deserialize_value</span></span>(<span>name: str, value: Union[str, int, ForwardRef(None), Sequence[object], Mapping[str, object]], expected_type: object, module_scope: dict[str, object]) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Deserialize any specific value, can be any supported hint including union!</p>
<p><code>name</code> l be included in any error messages produced!</p>
<p><code>module_scope</code> l be used to resolve forward referenced type hints, for example <code>dict[str, "ModelA"]</code>. this can usually just be <code>globals()</code></p>
<pre><code class="language-python-repl">&gt;&gt;&gt; deserialize_value(&quot;...&quot;, ..., ModelA | ModelB, globals())
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def deserialize_value(name: str, value: _JSON_DATA, expected_type: object, module_scope: dict[str, object]) -&gt; Any:
    &#34;&#34;&#34;
    Deserialize any specific value, can be any supported hint including union!

    `name` l be included in any error messages produced!

    `module_scope` l be used to resolve forward referenced type hints, for example `dict[str, &#34;ModelA&#34;]`. this can usually just be `globals()`

    &gt;&gt;&gt; deserialize_value(&#34;...&#34;, ..., ModelA | ModelB, globals())
    &#34;&#34;&#34;
    if isinstance(expected_type, str):
        expected_type = eval(expected_type, globals(), module_scope)

    if typing.get_origin(expected_type) == list:
        if not isinstance(value, list):
            raise TypeError(f&#34;Expected {name!r} to be {expected_type}, but got: {type(value)}&#34;)

        list_members: type = typing.get_args(expected_type)[0]
        return [deserialize_value(f&#34;{name}.{index}&#34;, elem, list_members, module_scope) for index, elem in enumerate(value)]  # type: ignore
    
    if typing.get_origin(expected_type) == dict:
        if not isinstance(value, dict):
            raise TypeError(f&#34;Expected {name!r} to be {expected_type}, but got: {type(value)}&#34;)
        
        key_type, value_type = typing.get_args(expected_type)
        if key_type != str:
            raise TypeError(f&#34;Dict key type must be str, got {key_type}, in type hint for {name!r}&#34;)
        
        return {key: deserialize_value(f&#34;{name}.{key}&#34;, item, value_type, module_scope) for key, item in value.items()}

    if typing.get_origin(expected_type) == typing.Literal:
        possible = typing.get_args(expected_type)
        if value not in possible:
            raise ValueError(f&#34;expected {name!r} to be one of {possible}, got {value!r}&#34;)
        
        return value

    if typing.get_origin(expected_type) in {typing.Union, types.UnionType}:
        return _deserialize_union(name, value, expected_type, module_scope)

    if issubclass(expected_type, JsonModel):
        if isinstance(value, expected_type):
            return value
            
        return expected_type(value)

    if issubclass(expected_type, JsonConverterModel):
        if not hasattr(expected_type, &#34;__orig_bases__&#34;):
            raise TypeError(f&#34;Cannot perform inspection of type {expected_type}&#34;)
        bases: tuple[type, ...] = expected_type.__orig_bases__ # type: ignore
        json_type: None | type = None
        for base in bases:
            if issubclass(typing.get_origin(base) or int, JsonConverterModel):
                json_type = typing.get_args(base)[0]
        if json_type is None:
            raise TypeError(&#34;Unable to determine converter base type from provided bases: {bases}&#34;)
        
        return expected_type(deserialize_value(name, value, json_type, module_scope))  # type: ignore

    if not isinstance(value, expected_type):
        raise TypeError(f&#34;Expected {name!r} to be &#39;{expected_type}&#39;, but got: {type(value)}&#34;)
    
    return value </code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="jerde.JsonConverterModel"><code class="flex name class">
<span>class <span class="ident">JsonConverterModel</span></span>
<span>(</span><span>data: ~T)</span>
</code></dt>
<dd>
<div class="desc"><p>Allows you to define custom converts for json values.
Giving you more control of how you data is loaded!</p>
<p>You need to specify the expected structure of the json, this can be any of the same typehints used in normal json fields.
And the value will be converted into the expected value before being passed to init.
This means you can use other models as a value, even other converter models!</p>
<pre><code class="language-python-repl">&gt;&gt;&gt;  # we expect the json to just be a int
&gt;&gt;&gt; class Converter(JsonConverterModel[int]): 
...     def __init__(self, data: int) -&gt; None:
...         self.value = data + 10  # lets do some custom logic
...     def to_json(self) -&gt; int:
...         return self.value - 10
&gt;&gt;&gt; class ConverterExample(JsonModel):
...     stuff: Converter
&gt;&gt;&gt; x = ConverterExample({&quot;stuff&quot;: 10})
&gt;&gt;&gt; x.stuff.value
20
&gt;&gt;&gt; x.to_json()
{&quot;stuff&quot;: 10}
</code></pre>
<p><strong>Note:</strong> it is good practice (but not enforced) to make sure that:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; Converter(something).to_json() == something
True
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class JsonConverterModel(typing.Generic[T], abc.ABC):
    &#34;&#34;&#34;
    Allows you to define custom converts for json values.
    Giving you more control of how you data is loaded!

    You need to specify the expected structure of the json, this can be any of the same typehints used in normal json fields.
    And the value will be converted into the expected value before being passed to init.
    This means you can use other models as a value, even other converter models!

    &gt;&gt;&gt;  # we expect the json to just be a int
    &gt;&gt;&gt; class Converter(JsonConverterModel[int]): 
    ...     def __init__(self, data: int) -&gt; None:
    ...         self.value = data + 10  # lets do some custom logic
    ...     def to_json(self) -&gt; int:
    ...         return self.value - 10
    &gt;&gt;&gt; class ConverterExample(JsonModel):
    ...     stuff: Converter
    &gt;&gt;&gt; x = ConverterExample({&#34;stuff&#34;: 10})
    &gt;&gt;&gt; x.stuff.value
    20
    &gt;&gt;&gt; x.to_json()
    {&#34;stuff&#34;: 10}
    
    **Note:** it is good practice (but not enforced) to make sure that:
    &gt;&gt;&gt; Converter(something).to_json() == something
    True
    &#34;&#34;&#34;

    @abc.abstractmethod
    def __init__(self, data: T) -&gt; None: ...
    @abc.abstractmethod
    def to_json(self) -&gt; T: ...</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>typing.Generic</li>
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="jerde.JsonConverterModel.to_json"><code class="name flex">
<span>def <span class="ident">to_json</span></span>(<span>self) ‑> ~T</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@abc.abstractmethod
def to_json(self) -&gt; T: ...</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="jerde.JsonModel"><code class="flex name class">
<span>class <span class="ident">JsonModel</span></span>
<span>(</span><span>data: Union[str, int, ForwardRef(None), Sequence[object], Mapping[str, object]] = None, **kwargs: object)</span>
</code></dt>
<dd>
<div class="desc"><p>This class is the main thing that does stuff.</p>
<p>It lets you define the structure of your json and use it as a normal class as well.
This class l automatically parse json data in its <strong>init</strong> and raise a TypeError if the structure does not match.</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class SimpleExample(JsonModel):
...     stuff: int
&gt;&gt;&gt; SimpleExample({&quot;stuff&quot;: 10}).stuff
10
&gt;&gt;&gt; SimpleExample({&quot;stuff&quot;: &quot;wrong&quot;})
TypeError: ...
</code></pre>
<p>You can also use keyword arguments to specify values in a nicer format.</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class SimpleExample(JsonModel):
...     stuff: int
&gt;&gt;&gt; SimpleExample(stuff = 10).stuff
10
</code></pre>
<p>It also supports unions (both <code>typing.Union</code> and 3.10 <code>|</code> syntax).</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class UnionExample(JsonModel):
...     stuff: int | str
&gt;&gt;&gt; UnionExample({&quot;stuff&quot;: &quot;hi&quot;}).stuff
&quot;hi&quot;
</code></pre>
<p>We also have support for Optional!</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; from typing import Optional
&gt;&gt;&gt; class OptionalExample(JsonModel):
...     stuff: Optional[int]
&gt;&gt;&gt; OptionalExample({&quot;stuff&quot;: 10}).stuff
10
&gt;&gt;&gt; OptionalExample({}).stuff
None
</code></pre>
<p>You can also have default values for fields, implicitly making them optional!</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class DefaultExample(JsonModel):
...     stuff: int = 10
&gt;&gt;&gt; DefaultExample({}).stuff
10
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class JsonModel:
    &#34;&#34;&#34;
    This class is the main thing that does stuff.

    It lets you define the structure of your json and use it as a normal class as well.
    This class l automatically parse json data in its __init__ and raise a TypeError if the structure does not match.

    &gt;&gt;&gt; class SimpleExample(JsonModel):
    ...     stuff: int
    &gt;&gt;&gt; SimpleExample({&#34;stuff&#34;: 10}).stuff
    10
    &gt;&gt;&gt; SimpleExample({&#34;stuff&#34;: &#34;wrong&#34;})
    TypeError: ...

    You can also use keyword arguments to specify values in a nicer format.
    &gt;&gt;&gt; class SimpleExample(JsonModel):
    ...     stuff: int
    &gt;&gt;&gt; SimpleExample(stuff = 10).stuff
    10

    It also supports unions (both `typing.Union` and 3.10 `|` syntax).
    &gt;&gt;&gt; class UnionExample(JsonModel):
    ...     stuff: int | str
    &gt;&gt;&gt; UnionExample({&#34;stuff&#34;: &#34;hi&#34;}).stuff
    &#34;hi&#34;

    We also have support for Optional!
    &gt;&gt;&gt; from typing import Optional
    &gt;&gt;&gt; class OptionalExample(JsonModel):
    ...     stuff: Optional[int]
    &gt;&gt;&gt; OptionalExample({&#34;stuff&#34;: 10}).stuff
    10
    &gt;&gt;&gt; OptionalExample({}).stuff
    None

    You can also have default values for fields, implicitly making them optional!
    &gt;&gt;&gt; class DefaultExample(JsonModel):
    ...     stuff: int = 10
    &gt;&gt;&gt; DefaultExample({}).stuff
    10
    &#34;&#34;&#34;

    def __init__(self, data: Optional[_JSON_DATA] = None, **kwargs: object):
        if data is None:
            data = kwargs

        if not isinstance(data, dict):
            raise TypeError(&#34;Expected dict&#34;)

        # error check data
        fields = _get_fields(self.__class__)
        module = inspect.getmodule(self.__class__)

        for name, json_key, expected_type in fields:
            if hasattr(self.__class__, name) and json_key not in data:
                setattr(self, name, getattr(self.__class__, name))
                continue

            setattr(self, name, deserialize_value(json_key, data.get(json_key), expected_type, module.__dict__))

    
    def to_json(self) -&gt; _JSON_DATA:
        &#34;&#34;&#34;
        Convert from the model into the json.

        This does the reverse from `__init__`.

        &gt;&gt;&gt; class SimpleExample(JsonModel):
        ...     stuff: int
        &gt;&gt;&gt; x = SimpleExample({&#34;stuff&#34;: 10})
        &gt;&gt;&gt; x.stuff = 20
        &gt;&gt;&gt; x.to_json()
        {&#34;stuff&#34;: 20}
        &#34;&#34;&#34;            
        return _serialize_value(self)</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="jerde.JsonModel.to_json"><code class="name flex">
<span>def <span class="ident">to_json</span></span>(<span>self) ‑> Union[str, int, ForwardRef(None), Sequence[object], Mapping[str, object]]</span>
</code></dt>
<dd>
<div class="desc"><p>Convert from the model into the json.</p>
<p>This does the reverse from <code>__init__</code>.</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; class SimpleExample(JsonModel):
...     stuff: int
&gt;&gt;&gt; x = SimpleExample({&quot;stuff&quot;: 10})
&gt;&gt;&gt; x.stuff = 20
&gt;&gt;&gt; x.to_json()
{&quot;stuff&quot;: 20}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_json(self) -&gt; _JSON_DATA:
    &#34;&#34;&#34;
    Convert from the model into the json.

    This does the reverse from `__init__`.

    &gt;&gt;&gt; class SimpleExample(JsonModel):
    ...     stuff: int
    &gt;&gt;&gt; x = SimpleExample({&#34;stuff&#34;: 10})
    &gt;&gt;&gt; x.stuff = 20
    &gt;&gt;&gt; x.to_json()
    {&#34;stuff&#34;: 20}
    &#34;&#34;&#34;            
    return _serialize_value(self)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="jerde.RenameField"><code class="flex name class">
<span>class <span class="ident">RenameField</span></span>
<span>(</span><span>json_name: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Lets you rename the field a value has in the json structure.</p>
<p>example:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; from typing import Annotated
&gt;&gt;&gt; class RenameExample(JsonModel):
...     value: Annotated[int, RenameField(&quot;other&quot;)]
&gt;&gt;&gt; x = RenameExample({&quot;other&quot;: 10})
&gt;&gt;&gt; x.value
10
&gt;&gt;&gt; x.value = 20
&gt;&gt;&gt; x.to_json()
{&quot;other&quot;: 20}
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class RenameField:
    &#34;&#34;&#34;
    Lets you rename the field a value has in the json structure.

    example:
    &gt;&gt;&gt; from typing import Annotated
    &gt;&gt;&gt; class RenameExample(JsonModel):
    ...     value: Annotated[int, RenameField(&#34;other&#34;)]
    &gt;&gt;&gt; x = RenameExample({&#34;other&#34;: 10})
    &gt;&gt;&gt; x.value
    10
    &gt;&gt;&gt; x.value = 20
    &gt;&gt;&gt; x.to_json()
    {&#34;other&#34;: 20}

    &#34;&#34;&#34;
    def __init__(self, json_name: str) -&gt; None:
        self.json_name = json_name

    def __repr__(self) -&gt; str:
        return f&#34;RenameField({self.json_name!r})&#34;</code></pre>
</details>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="jerde.deserialize_value" href="#jerde.deserialize_value">deserialize_value</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="jerde.JsonConverterModel" href="#jerde.JsonConverterModel">JsonConverterModel</a></code></h4>
<ul class="">
<li><code><a title="jerde.JsonConverterModel.to_json" href="#jerde.JsonConverterModel.to_json">to_json</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="jerde.JsonModel" href="#jerde.JsonModel">JsonModel</a></code></h4>
<ul class="">
<li><code><a title="jerde.JsonModel.to_json" href="#jerde.JsonModel.to_json">to_json</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="jerde.RenameField" href="#jerde.RenameField">RenameField</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>